FROM node:24-alpine

# Configure DNS for better resolution during npm install
RUN echo "nameserver 8.8.8.8" > /etc/resolv.conf && \
    echo "nameserver 8.8.4.4" >> /etc/resolv.conf && \
    echo "nameserver 1.1.1.1" >> /etc/resolv.conf

WORKDIR /app

COPY package*.json ./

RUN npm install

COPY . .

# Create .env file if it doesn't exist (environment variables are set via docker-compose)
RUN touch .env || true

EXPOSE 3000

CMD ["npm", "run", "dev"]
